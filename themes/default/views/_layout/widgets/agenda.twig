{% extends '@layout/widgets/menuitem.twig' %}

{% block name 'agenda' %}

{% block title __('Agenda') %}

{% block content %}
{% set agenda_items = view.layout.agenda %}
{% set jarigen = view.layout.jarigen %}
{% set cover_jarig = view.layout.is_cover_jarig() %}
{% set count_jarigen = jarigen|length + (cover_jarig ? 1 : 0) %}

{% if agenda_items|length > 0 %}
<ol class="agenda">
	{% for item in agenda_items|slice(0, 10) %}
		<li>
			<a href="agenda.php?agenda_id={{ item.id }}">
				<div class="calendar-icon">
					<span class="month">{{ item.van|date('M') }}</span>
					<span class="day">{{ item.van|date('d') }}</span>
				</div>
				<span class="title">{{ item.kop }}</span>
				{% if item.extern %}
					<span class="details">{{ __('Externe activiteit') }}</span>
				{% else %}
					<span class="details">{{ item|period_short }}</span>
				{% endif %}
				{% if item.is_proposal() %}
					<span class="label-pending">{{ __('Nog niet gepubliceerd') }}</span>
				{% endif %}
			</a>
		</li>
	{% endfor %}
</ol>
{% else %}
<p class="smaller">{{ __('Er staan op dit moment geen activiteiten op de agenda.') }}</p>
{% endif %}

<p class="smaller"><a href="agenda.php"><b>{{ __('Volledige agenda') }}</b></a></p>

{% if count_jarigen > 0 %}
<p class="bold">{{ __('Jarigen') }}</p>
<hr>
<div class="smaller">
	{{ __N('Er is vandaag %d jarige:', 'Er zijn vandaag %d jarigen:', count_jarigen) }}<br>
	{% if cover_jarig %}
		<span style="font-weight: bold; color: #c60c30;">Cover!</span> ({{ view.layout.cover_leeftijd }})<br>
	{% endif %}
	{% for jarige in jarigen %}
		<a href="{{ link('profiel.read', member=jarige) }}">{{ jarige|personal_full_name }} ({{ jarige.leeftijd }})</a><br>
	{% endfor %}
</div>
{% endif %}
{% endblock %}