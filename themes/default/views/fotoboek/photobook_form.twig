{% extends '@layout/layout.twig' %}

{% set form_title = book.id > 0 ? __('Modify photo album') : __('Add a new photo album') %}

{% set form_action = book.id > 0 ? 'fotoboek.php?book=%d&view=update_book'|format(book.id) : 'fotoboek.php?book=%d&view=add_book'|format(book.parent.id) %}

{% set form_submit_button = book.id > 0 ? __('Modify photo album') : __('Add photo album') %}

{% block title form_title ~ ' :: ' ~ parent() %}

{% block content %}
<h1>{{ form_title }}</h1>
<div class="messageBox">
	<form method="post" action="{{ form_action|e('html_attr') }}" class="vertical-form">
		{% if book.id %}
			{{ html_nonce('update_book', book) }}
		{% else %}
			{{ html_nonce('create_book', book.parent) }}
		{% endif %}

		<div>
			{{ html_label(__('Title'), 'titel', errors=errors, required=true) }}
			{{ html_input_text('titel', book, required='required') }}
		</div>

		<div>
			{{ html_label(__('Part of'), 'parent', errors=errors, required=false) }}
			<a href="fotoboek.php?book={{ book.parent.id }}">{{ book.parent.titel }}</a>
		</div>

		<div>
			{{ html_label(__('Date (dd-mm-yyyy)'), 'date', errors=errors, required=true) }}
			{{ html_input_text('date', book, required='required') }}
		</div>

		<div>
			{{ html_label(__('Photographer'), 'fotograaf', errors=errors, required=true) }}
			{{ html_input_text('fotograaf', book, required='required') }}
		</div>

		<div>
			{{ html_label(__('Visible to'), 'visibility', errors=errors, required=true) }}
			{{ html_select_field('visibility', view.visibility_options, book, required=true) }}
		</div>		

		<div>
			{{ html_label(__('Description'), 'beschrijving', errors=errors) }}
			{{ html_textarea_field('beschrijving', book, errors=errors, rows=5) }}
		</div>

		<div>
			<button type="submit" class="button">{{ form_submit_button }}</button>
			{% if book.id > 0 %}
			<a href="fotoboek.php?book={{ book.id }}">{{ __('Return to %s')|format(book.titel) }}</a>
			{% else %}
			<a href="fotoboek.php?book={{ book.parent.id }}">{{ __('Return to %s')|format(book.parent.titel) }}</a>
			{% endif %}
		</div>
	</form>
</div>
{% endblock %}