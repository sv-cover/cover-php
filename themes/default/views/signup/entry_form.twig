{% extends '@layout/layout.twig' %}

{% block title __('Formulier') ~ ' :: ' ~ parent() %}

{% block content %}
<div class="pageheading">
	<div class="controls inline">
		{% if form.has_id and user_can_update form %}
			<a href="{{ controller.link({'view': 'update_form', 'form': form.id}) }}" class="edit-link">{{ __('Bewerk formulier') }}</a>
			<a href="{{ controller.link({'view': 'list_entries', 'form': form.id}) }}" class="download-link">{{ __('Bekijk inschrijvingen') }}</a>
		{% endif %}
	</div>
	<h1>{{ __('Formulier') }}</h1>
</div>
<div class="messageBox">
	{% if not form.is_open %}
	<section class="warning-section">
		<h3>{{ __('De inschrijvingen zijn gesloten.') }}</h3>
		<p>{{ __('Jij kan dit formulier nu wel zien omdat je de rechten hebt om mensen in te schrijven buiten de inschrijfperiode.') }}</p>
	</section>
	{% endif %}
	
	{% if success %}
		<p>{{ __('Succes! Je inschrijving is compleet.') }}</p>
	{% else %}
		<form action="{{ entry.has_id ? controller.link({view: 'update_entry', form: form.id, entry: entry.id}) : controller.link({view: 'create_entry', form: form.id}) }}" method="post" class="vertical-form">
			{% if entry.has_id %}
				{{ html_nonce('update_entry', entry) }}
			{% else %}
				{{ html_nonce('create_entry', form) }}
			{% endif %}
			
			{% for field in form.fields %}
				<div>
					{{ field.render(view, entry)|raw }}
				</div>
			{% endfor %}

			<div class="controls">
				<button class="button" type="submit">{{ entry.has_id ? __('Wijzig inschrijving') : __('Schrijf mij in') }}</button>
			</div>
		</form>
	{% endif %}
</div>
{% endblock %}
