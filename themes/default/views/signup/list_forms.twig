{% extends '@layout/layout.twig' %}

{% block title __('Sign-up forms') ~ ' &ndash; ' ~ parent() %}

{% block content %}
<header class="level">
	<div class="level-left">
		<h1 class="title">{{ __('Sign-up forms') }}</h1>
	</div>
	{% if user_can_create controller.new_form %}
		<div class="level-right buttons">	
			<a href="{{ controller.link({'view': 'create_form'}) }}" class="button">{{ __('New sign-up form') }}</a>
		</div>
	{% endif %}
</header>

<article>
	<table class="table is-fullwidth">
		<thead>
			<tr>
				<th>{{ __('Form') }}</th>
				<th>{{ __('Activity') }}</th>
				<th class="has-text-right">{{ __('Subscriptions') }}</th>
			</tr>
		</thead>
		<tbody>
			{% for form in forms|sort_by('created_on desc') %}
				<tr>
					<td><a href="{{ controller.link({'view': 'list_entries', 'form': form.id}) }}">{{ form.description }}</a></td>
					<td>
						{% if form.agenda_id %}
							<a href="agenda.php?agenda_id={{form.agenda_id}}">{{ form.agenda_item.kop }} ({{ form.agenda_item|period }})</a>
						{% endif %}
					</td>
					<td class="has-text-right">{{ form.signup_count }}</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="3" class="has-text-centered content">
						<p>
							{% if global.identity.member.committees|length > 1 %}
								{{ __('None of you committees is managing any sign-up forms.') }}
							{% else %}
								{{ __('Your committee is not managing any sign-up forms.') }}
							{% endif %}
						</p>
						<p>
							{% if user_can_create controller.new_form %}
								{{ __('To create a new form, click the ‘New sign-up form’ button above this table, or go to the activity and click the link in the footer.')}}
							{% else %}
								{{ __('Right now this feature is being tested by a few committees. If you want to use this feature for your activity as well, contact the AC/DCee.') }}
							{% endif %}
						</p>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
</article>
{% endblock %}