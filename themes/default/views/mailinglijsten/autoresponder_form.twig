{% extends '@layout/layout.twig' %}

{% block title __('Modify message') ~ ' :: ' ~ parent() %}

{% block content %}
<h1>{{ __('Modify message') }}</h1>
<div class="messageBox">
	<form method="post" action="{{ controller.link_to_update_autoresponder(iter, autoresponder)|e('html_attr') }}" class="vertical-form">
		<div>
			{{ html_label(__('Subject'), autoresponder ~ '_subject', errors=errors, required=true) }}
			{{ html_input_text(autoresponder ~ '_subject', iter, errors=errors, required=true) }}
		</div>

		<div>
			{{ html_label(__('Message'), autoresponder ~ '_message', errors=errors) }}

			<div id="wysihtml-toolbar" class="button-bar" style="display: none;">
				<span class="button-group">
					<a data-wysihtml5-command="bold" class="button" title="Bold" tabindex="-1"><i class="fa fa-bold"></i></a>
					<a data-wysihtml5-command="italic" class="button" title="Italic" tabindex="-1"><i class="fa fa-italic"></i></a>
					<a data-wysihtml5-command="underline" class="button" title="Underline" tabindex="-1"><i class="fa fa-underline"></i></a>
				</span>
				<span class="button-group">
					<a data-wysihtml5-command="insertOrderedList" class="button" title="Insert ordered list" tabindex="-1"><i class="fa fa-list-ol"></i></a>
					<a data-wysihtml5-command="insertUnorderedList" class="button" title="Insert unordered list" tabindex="-1"><i class="fa fa-list-ul"></i></a>
				</span>

				<a data-wysihtml5-command="createLink" class="button" tabindex="-1"><i class="fa fa-link"></i>&nbsp;Insert link</a>
				<div data-wysihtml5-dialog="createLink" style="display: none;">
					<label>Link: <input data-wysihtml5-dialog-field="href" value="http://" class="text"></label>
					<a data-wysihtml5-dialog-action="save" class="button">OK</a>
					<a data-wysihtml5-dialog-action="cancel">Cancel</a>
				</div>

				<span class="button-menu">
					<a href="javascript:;" class="button" tabindex="-1">Insert placeholder</a>
					<ul>
						<li><a data-wysihtml5-command="insertHTML" data-wysihtml5-command-value="[NAME]" tabindex="-1">Name</a></li>
						<li><a data-wysihtml5-command="insertHTML" data-wysihtml5-command-value="[UNSUBSCRIBE]" tabindex="-1">Unsubscribe link</a></li>
					</ul>
				</span>
			</div>

			{{ html_textarea_field(autoresponder ~ '_message', iter, errors=errors, rows=10) }}
		</div>

		<div>
			<button type="submit" class="button">{{ __('Change emai') }}</button>
			<a href="{{ controller.link_to_read(iter)|e('html_attr') }}">{{ __('Return to mailing list') }}</a>
		</div>
	</form>
</div>
<script src="{{ link_static('data/wysihtml5x-toolbar.min.js')|e('html_attr') }}"></script>
<script src="{{ link_static('data/wysihtml5x-parser-rules-simple.js')|e('html_attr') }}"></script>
<script>
	jQuery(function($) {
		var editor = new wysihtml5.Editor({{ autoresponder ~ '_message'|json_encode() }},{
			'toolbar': 'wysihtml-toolbar',
			'parserRules': wysihtml5ParserRules
		});
	});
</script>
{% endblock %}